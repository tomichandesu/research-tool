<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1688 商品マッチング候補ビューアー</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Segoe UI','Meiryo','Hiragino Sans',sans-serif;background:#f0f2f5;color:#333;padding:20px}
.header{text-align:center;margin-bottom:32px;padding:24px;background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.06)}
.header h1{font-size:22px;color:#1a1a2e;margin-bottom:8px}
.header .stats{font-size:14px;color:#666}
.header .guide{font-size:13px;color:#888;margin-top:12px;line-height:1.6}

.product-card{background:#fff;border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 2px 8px rgba(0,0,0,.06)}
.product-num{display:inline-block;background:#1a1a2e;color:#fff;font-size:12px;font-weight:bold;padding:2px 10px;border-radius:12px;margin-bottom:12px}

.amazon-section{display:flex;gap:16px;padding-bottom:16px;border-bottom:1px solid #eee;margin-bottom:16px}
.amazon-img{width:130px;height:130px;object-fit:contain;border:1px solid #eee;border-radius:8px;background:#fafafa;flex-shrink:0}
.amazon-info{flex:1;min-width:0}
.amazon-info h3{font-size:14px;color:#333;margin-bottom:8px;line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.amazon-price{font-size:20px;font-weight:bold;color:#B12704;margin-bottom:6px}
.amazon-details{font-size:12px;color:#666;line-height:1.8}
.amazon-details span{display:inline-block;margin-right:12px}
.amazon-link{font-size:12px;color:#0066c0;text-decoration:none;margin-top:4px;display:inline-block}
.amazon-link:hover{text-decoration:underline}

.candidates-label{font-size:13px;font-weight:bold;color:#555;margin-bottom:12px}
.candidates{display:flex;gap:12px;flex-wrap:wrap}

.candidate{border:2px solid #e0e0e0;border-radius:10px;padding:10px;width:175px;transition:all .15s;background:#fff}
.candidate:hover{border-color:#90CAF9;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.1)}
.candidate-img{width:100%;height:140px;object-fit:contain;border-radius:6px;background:#fafafa;display:block}
.candidate-img-error{width:100%;height:140px;display:flex;align-items:center;justify-content:center;background:#f5f5f5;border-radius:6px;color:#bbb;font-size:12px}
.candidate-price{font-size:16px;font-weight:bold;color:#c62828;margin:8px 0 4px}
.candidate-profit{font-size:13px;font-weight:bold;margin-bottom:4px}
.candidate-profit.good{color:#2E7D32}
.candidate-profit.mid{color:#F57F17}
.candidate-profit.low{color:#c62828}
.candidate-detail{font-size:11px;color:#888;margin-bottom:4px}
.candidate-link{font-size:11px;color:#1565C0;text-decoration:none;word-break:break-all;display:block;margin-top:4px}
.candidate-link:hover{text-decoration:underline}
.candidate-shop{font-size:10px;color:#999;margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.no-candidates{color:#999;font-size:13px;padding:20px;text-align:center}
</style>
</head>
<body>

<div class="header">
  <h1>1688 商品マッチング候補ビューアー</h1>
  <div class="stats" id="statsLine"></div>
  <div class="guide">
    Amazon商品と1688候補の画像を比較して、同一商品があるか目視で確認できます。<br>
    候補画像の下にあるリンクから1688の商品ページを直接開けます。
  </div>
</div>

<div id="products"></div>

<script>
const DATA = JSON.parse('{"keyword": "バンプラバー ウレタン", "generated_at": "2026-02-07 19:50:05", "products": [{"amazon": {"asin": "B0C6M34RGL", "title": "TOMMYFIELD バンプラバー バンプ ショックアブソーバー 汎用 ウレタン", "price": 1550, "image_url": "https://m.media-amazon.com/images/I/61KLrJA-TPL._AC_SX679_.jpg", "bsr": 21203, "category": "車＆バイク", "review_count": 28, "is_fba": false, "product_url": "https://www.amazon.co.jp/dp/B0C6M34RGL", "rating": 4.0, "seller_name": "TOMMYFIELD", "variation_count": 1, "dimensions": [2.0, 2.0, 5.0], "weight_kg": 0.5}, "estimated_monthly_sales": 50, "estimated_monthly_revenue": 77500, "candidates": [{"alibaba": {"price_cny": 11.5, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01PtqKAb1OIrgfZHkfY_!!4245151683-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/999444778774.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "15039397适用凯迪拉克 雪佛兰 GMC 前后悬挂减震缓冲垫15153958"}, "orb_similarity": 0.0541, "profit": {"amazon_price": 1550, "cost_1688_jpy": 264, "shipping": 115, "customs": 37, "referral_fee": 232, "fba_fee": 0, "total_cost": 701, "profit": 849, "profit_rate": 0.547741935483871, "is_profitable": true, "profit_rate_percentage": 54.8}}, {"alibaba": {"price_cny": 12.6, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01ZhLnZ91NCA9M4aMI9_!!3392061533-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/631527975056.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "15039397 キャデラックシボレーフロントとリアサイドショックアブソーバーバッファブロック 15153958 カーアクセサリー"}, "orb_similarity": 0.027, "profit": {"amazon_price": 1550, "cost_1688_jpy": 289, "shipping": 115, "customs": 40, "referral_fee": 232, "fba_fee": 0, "total_cost": 730, "profit": 820, "profit_rate": 0.5290322580645161, "is_profitable": true, "profit_rate_percentage": 52.9}}, {"alibaba": {"price_cny": 12.6, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN0184gzN31lmqhwkLu3M_!!2218032794862-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/807453026679.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "キャデラック、シボレー、GMCポリウレタンの前後側の衝撃緩衝ブロック15153958を適用します。"}, "orb_similarity": 0.027, "profit": {"amazon_price": 1550, "cost_1688_jpy": 289, "shipping": 115, "customs": 40, "referral_fee": 232, "fba_fee": 0, "total_cost": 730, "profit": 820, "profit_rate": 0.5290322580645161, "is_profitable": true, "profit_rate_percentage": 52.9}}, {"alibaba": {"price_cny": 4.09, "image_url": "https://cbu01.alicdn.com/img/ibank/6788007796_1651743979.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/561581739646.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "2穴車用防水メスプラグ端子コネクタ10セット5セット2セット"}, "orb_similarity": 0.027, "profit": {"amazon_price": 1550, "cost_1688_jpy": 94, "shipping": 115, "customs": 20, "referral_fee": 232, "fba_fee": 0, "total_cost": 509, "profit": 1041, "profit_rate": 0.6716129032258065, "is_profitable": true, "profit_rate_percentage": 67.2}}, {"alibaba": {"price_cny": 22.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01tI3Jhj22MbAHcMcgS_!!2200548367106-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/661289002118.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "キャデラック、シボレー、gmcポリウレタンの前後側の衝撃緩衝ブロック15153958を適用します。"}, "orb_similarity": 0.027, "profit": {"amazon_price": 1550, "cost_1688_jpy": 506, "shipping": 115, "customs": 62, "referral_fee": 232, "fba_fee": 0, "total_cost": 976, "profit": 574, "profit_rate": 0.37032258064516127, "is_profitable": true, "profit_rate_percentage": 37.0}}, {"alibaba": {"price_cny": 3.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01rytEHo1HMnn3iLCoe_!!2221304880744-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/1011615727925.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "15153958，905-208适用凯迪拉克雪佛兰倍创茗月前控制臂保险胶块"}, "orb_similarity": 0.027, "profit": {"amazon_price": 1550, "cost_1688_jpy": 69, "shipping": 115, "customs": 18, "referral_fee": 232, "fba_fee": 0, "total_cost": 482, "profit": 1068, "profit_rate": 0.6890322580645162, "is_profitable": true, "profit_rate_percentage": 68.9}}]}, {"amazon": {"asin": "B0D81RTX6J", "title": "ソフトバンプラバー ハイエース200系 ランクル用 バンプラバー バンプストップラバー 大容量 ウレタン バンプラバー 左右セット", "price": 3500, "image_url": "https://m.media-amazon.com/images/I/71hh+ytBIRL._AC_SX679_.jpg", "bsr": 38388, "category": "車＆バイク", "review_count": 26, "is_fba": false, "product_url": "https://www.amazon.co.jp/dp/B0D81RTX6J", "rating": 3.8, "seller_name": "Sarasara JP", "variation_count": 1, "dimensions": [14.0, 10.0, 13.0], "weight_kg": 0.5}, "estimated_monthly_sales": 31, "estimated_monthly_revenue": 108500, "candidates": [{"alibaba": {"price_cny": 30.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01tIqOS51DFh4G6jO3i_!!2218789620187-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/847411995095.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "48306-35180 KZN185 5vz1kzを適用した後、バックゴム"}, "orb_similarity": 0.0262, "profit": {"amazon_price": 3500, "cost_1688_jpy": 690, "shipping": 115, "customs": 80, "referral_fee": 525, "fba_fee": 0, "total_cost": 1476, "profit": 2024, "profit_rate": 0.5782857142857143, "is_profitable": true, "profit_rate_percentage": 57.8}}, {"alibaba": {"price_cny": 1.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01iE3nsu1QFJqrfnFlo_!!2220888841946-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/998541865490.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "适用于丰田日系减震橡胶件 48306-35180"}, "orb_similarity": 0.0228, "profit": {"amazon_price": 3500, "cost_1688_jpy": 23, "shipping": 115, "customs": 13, "referral_fee": 525, "fba_fee": 0, "total_cost": 722, "profit": 2778, "profit_rate": 0.7937142857142857, "is_profitable": true, "profit_rate_percentage": 79.4}}, {"alibaba": {"price_cny": 5.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01yBEViJ1TCydnFTYYr_!!2218325792347-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/956380364856.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "ダンベルラックポータブルホームヨガフィットネスサポート機器ブラケット収納ラック三脚ホームフィットネス"}, "orb_similarity": 0.0227, "profit": {"amazon_price": 3500, "cost_1688_jpy": 115, "shipping": 115, "customs": 23, "referral_fee": 525, "fba_fee": 0, "total_cost": 827, "profit": 2673, "profit_rate": 0.7637142857142857, "is_profitable": true, "profit_rate_percentage": 76.4}}, {"alibaba": {"price_cny": 6.8, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01SY7iuB1HpecPuVz8Q_!!2639750807-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/533844299784.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "金属製三層折りたたみ式シューズラック、家庭用家具、隠し金具付き、家庭用シューズラック、シューズキャビネット、折りたたみ式ラック"}, "orb_similarity": 0.0111, "profit": {"amazon_price": 3500, "cost_1688_jpy": 156, "shipping": 115, "customs": 27, "referral_fee": 525, "fba_fee": 0, "total_cost": 873, "profit": 2627, "profit_rate": 0.7505714285714286, "is_profitable": true, "profit_rate_percentage": 75.1}}, {"alibaba": {"price_cny": 12.9, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01gQVGYW1dv4dwFefag_!!2579533797-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/684051537792.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "ダンベルスタンド、厚みのある三角形の環境に優しいプラスチック製スタンド、汎用アクセサリー、収納、フィットネスアクセサリースタンド"}, "orb_similarity": 0.0091, "profit": {"amazon_price": 3500, "cost_1688_jpy": 296, "shipping": 115, "customs": 41, "referral_fee": 525, "fba_fee": 0, "total_cost": 1031, "profit": 2469, "profit_rate": 0.7054285714285714, "is_profitable": true, "profit_rate_percentage": 70.5}}, {"alibaba": {"price_cny": 5.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01RgeVR22BlBJsPZUTP_!!2219395728378-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/961604054897.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "厂家直销家用三层小哑铃架办公室小型塑料架商用健身器材现货批发"}, "orb_similarity": 0.0089, "profit": {"amazon_price": 3500, "cost_1688_jpy": 115, "shipping": 115, "customs": 23, "referral_fee": 525, "fba_fee": 0, "total_cost": 827, "profit": 2673, "profit_rate": 0.7637142857142857, "is_profitable": true, "profit_rate_percentage": 76.4}}, {"alibaba": {"price_cny": 5.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01RgeVR22BlBJsPZUTP_!!2219395728378-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/1013392396843.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "现货批发健身家用三层小哑铃架办公室小型塑料架商用健身器材收纳"}, "orb_similarity": 0.0089, "profit": {"amazon_price": 3500, "cost_1688_jpy": 115, "shipping": 115, "customs": 23, "referral_fee": 525, "fba_fee": 0, "total_cost": 827, "profit": 2673, "profit_rate": 0.7637142857142857, "is_profitable": true, "profit_rate_percentage": 76.4}}, {"alibaba": {"price_cny": 7.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01e2OjwN1metNn7pN2Q_!!2218352134980-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/819343359357.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "小さいダンベルの棚の女性のダンベルの収納棚の男性のフィットネスの器材の家庭用の子供の六角の小さいダンベルのスタンド"}, "orb_similarity": 0.0089, "profit": {"amazon_price": 3500, "cost_1688_jpy": 161, "shipping": 115, "customs": 27, "referral_fee": 525, "fba_fee": 0, "total_cost": 878, "profit": 2622, "profit_rate": 0.7491428571428571, "is_profitable": true, "profit_rate_percentage": 74.9}}, {"alibaba": {"price_cny": 30.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN018nFkL826UAWtYRqpi_!!2217550057664-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/832236853368.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "電動自転車トランクブラケット小型電気自動車トランク固定貨物棚荷物ラックホルダー共通"}, "orb_similarity": 0.0068, "profit": {"amazon_price": 3500, "cost_1688_jpy": 690, "shipping": 115, "customs": 80, "referral_fee": 525, "fba_fee": 0, "total_cost": 1476, "profit": 2024, "profit_rate": 0.5782857142857143, "is_profitable": true, "profit_rate_percentage": 57.8}}, {"alibaba": {"price_cny": 18.0, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01JC5c1R1z8STCoX0Fl_!!2220725716669-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/998195733822.html", "shop_name": null, "shop_url": null, "min_order": null, "title": "2915013LC 适配江铃陆风X8后钢板缓冲块 减震缓冲胶块 板簧缓冲胶"}, "orb_similarity": 0.0068, "profit": {"amazon_price": 3500, "cost_1688_jpy": 414, "shipping": 115, "customs": 52, "referral_fee": 525, "fba_fee": 0, "total_cost": 1164, "profit": 2336, "profit_rate": 0.6674285714285715, "is_profitable": true, "profit_rate_percentage": 66.7}}]}, {"amazon": {"asin": "B0CJ2HFBQ9", "title": "大容量 ウレタン バンプラバー 200系ハイエース、ランクル用", "price": 3450, "image_url": "https://m.media-amazon.com/images/I/61stN0ey02L._AC_SX679_.jpg", "bsr": 45922, "category": "車＆バイク", "review_count": 13, "is_fba": false, "product_url": "https://www.amazon.co.jp/dp/B0CJ2HFBQ9", "rating": 4.0, "seller_name": "Kiload", "variation_count": 1, "dimensions": [22.9, 16.7, 7.8], "weight_kg": 0.5}, "estimated_monthly_sales": 27, "estimated_monthly_revenue": 93150, "candidates": [{"alibaba": {"price_cny": 3.6, "image_url": "https://cbu01.alicdn.com/img/ibank/20474945699_398684670.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/626538355344.html", "shop_name": null, "shop_url": null, "min_order": null, "title": null}, "orb_similarity": 0.021, "profit": {"amazon_price": 3450, "cost_1688_jpy": 82, "shipping": 115, "customs": 19, "referral_fee": 517, "fba_fee": 0, "total_cost": 781, "profit": 2669, "profit_rate": 0.7736231884057971, "is_profitable": true, "profit_rate_percentage": 77.4}}, {"alibaba": {"price_cny": 3.9, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01JXksZG1pL9IUYyEOi_!!2208641125343-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/1012758002390.html", "shop_name": null, "shop_url": null, "min_order": null, "title": null}, "orb_similarity": 0.0147, "profit": {"amazon_price": 3450, "cost_1688_jpy": 89, "shipping": 115, "customs": 20, "referral_fee": 517, "fba_fee": 0, "total_cost": 789, "profit": 2661, "profit_rate": 0.7713043478260869, "is_profitable": true, "profit_rate_percentage": 77.1}}, {"alibaba": {"price_cny": 10.8, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01CNBieK1J8iqQL7WxE_!!2221350410984-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/1010113213187.html", "shop_name": null, "shop_url": null, "min_order": null, "title": null}, "orb_similarity": 0.0146, "profit": {"amazon_price": 3450, "cost_1688_jpy": 248, "shipping": 115, "customs": 36, "referral_fee": 517, "fba_fee": 0, "total_cost": 969, "profit": 2481, "profit_rate": 0.7191304347826087, "is_profitable": true, "profit_rate_percentage": 71.9}}, {"alibaba": {"price_cny": 1.5, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01m8gKeX24KQsJU4xcq_!!2220263807372-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/957376195525.html", "shop_name": null, "shop_url": null, "min_order": null, "title": null}, "orb_similarity": 0.0085, "profit": {"amazon_price": 3450, "cost_1688_jpy": 34, "shipping": 115, "customs": 14, "referral_fee": 517, "fba_fee": 0, "total_cost": 727, "profit": 2723, "profit_rate": 0.7892753623188405, "is_profitable": true, "profit_rate_percentage": 78.9}}, {"alibaba": {"price_cny": 9.9, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01NuI5gf1ch3Drrrlzt_!!2220766153631-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/997270939819.html", "shop_name": null, "shop_url": null, "min_order": null, "title": null}, "orb_similarity": 0.0085, "profit": {"amazon_price": 3450, "cost_1688_jpy": 227, "shipping": 115, "customs": 34, "referral_fee": 517, "fba_fee": 0, "total_cost": 945, "profit": 2505, "profit_rate": 0.7260869565217392, "is_profitable": true, "profit_rate_percentage": 72.6}}, {"alibaba": {"price_cny": 1.4, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01OZoR6p2KPxXmYSe1j_!!2221379499550-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/1010201481797.html", "shop_name": null, "shop_url": null, "min_order": null, "title": null}, "orb_similarity": 0.0084, "profit": {"amazon_price": 3450, "cost_1688_jpy": 32, "shipping": 115, "customs": 14, "referral_fee": 517, "fba_fee": 0, "total_cost": 724, "profit": 2726, "profit_rate": 0.7901449275362319, "is_profitable": true, "profit_rate_percentage": 79.0}}, {"alibaba": {"price_cny": 1.2, "image_url": "https://cbu01.alicdn.com/img/ibank/O1CN01Zu2NQm28nyuzhHXVD_!!2220019437978-0-cib.jpg_460x460q100.jpg_", "product_url": "https://detail.1688.com/offer/992454878125.html", "shop_name": null, "shop_url": null, "min_order": null, "title": null}, "orb_similarity": 0.0063, "profit": {"amazon_price": 3450, "cost_1688_jpy": 27, "shipping": 115, "customs": 14, "referral_fee": 517, "fba_fee": 0, "total_cost": 719, "profit": 2731, "profit_rate": 0.7915942028985508, "is_profitable": true, "profit_rate_percentage": 79.2}}]}]}');

function init() {
  document.getElementById('statsLine').textContent =
    'キーワード: ' + DATA.keyword + ' | 商品数: ' + DATA.products.length + '件 | 生成: ' + DATA.generated_at;
  const container = document.getElementById('products');
  DATA.products.forEach(function(product, pi) {
    container.appendChild(buildCard(product, pi));
  });
}

function buildCard(product, pi) {
  const card = document.createElement('div');
  card.className = 'product-card';

  const am = product.amazon;
  const dims = am.dimensions ? am.dimensions[0]+'x'+am.dimensions[1]+'x'+am.dimensions[2]+'cm' : '-';
  const weight = am.weight_kg ? am.weight_kg+'kg' : '-';

  let html = '<span class="product-num">#' + (pi+1) + '</span>';
  html += '<div class="amazon-section">';
  html += '<img class="amazon-img" src="' + escHtml(am.image_url) + '" onerror="this.style.display=\'none\'">';
  html += '<div class="amazon-info">';
  html += '<h3>' + escHtml(am.title) + '</h3>';
  html += '<div class="amazon-price">&yen;' + num(am.price) + '</div>';
  html += '<div class="amazon-details">';
  html += '<span>ASIN: ' + am.asin + '</span>';
  html += '<span>BSR: ' + num(am.bsr) + '</span>';
  html += '<span>レビュー: ' + am.review_count + '件</span>';
  if (am.rating) html += '<span>★' + am.rating + '</span>';
  html += '<span>FBA: ' + (am.is_fba ? '○' : '×') + '</span>';
  html += '<span>バリエ: ' + (am.variation_count || 1) + '</span>';
  html += '<span>寸法: ' + dims + '</span>';
  html += '<span>重量: ' + weight + '</span>';
  html += '</div>';
  html += '<div class="amazon-details"><span>月間販売: ' + num(product.estimated_monthly_sales) + '個</span>';
  html += '<span>月間売上: &yen;' + num(product.estimated_monthly_revenue) + '</span></div>';
  html += '<a class="amazon-link" href="' + escHtml(am.product_url || ('https://www.amazon.co.jp/dp/' + am.asin)) + '" target="_blank">Amazon で見る &rarr;</a>';
  html += '</div></div>';

  html += '<div class="candidates-label">1688 候補 (' + product.candidates.length + '件)</div>';
  html += '<div class="candidates">';

  product.candidates.forEach(function(cand) {
    var profitPct = cand.profit.profit_rate_percentage;
    var profitClass = profitPct >= 25 ? 'good' : profitPct >= 15 ? 'mid' : 'low';
    html += '<div class="candidate">';
    html += '<img class="candidate-img" src="' + escHtml(cand.alibaba.image_url) + '" onerror="this.outerHTML=\'<div class=candidate-img-error>画像読込失敗</div>\'">';
    var orbSim = cand.orb_similarity != null ? (cand.orb_similarity * 100).toFixed(1) + '%' : '-';
    html += '<div class="candidate-detail" style="font-weight:bold;color:#1565C0">類似度: ' + orbSim + '</div>';
    html += '<div class="candidate-price">' + cand.alibaba.price_cny + '元 (&yen;' + num(Math.round(cand.alibaba.price_cny * 23)) + ')</div>';
    html += '<div class="candidate-profit ' + profitClass + '">利益: &yen;' + num(cand.profit.profit) + ' (' + profitPct + '%)</div>';
    html += '<div class="candidate-detail">総コスト: &yen;' + num(cand.profit.total_cost) + '</div>';
    if (cand.alibaba.shop_name) html += '<div class="candidate-shop">' + escHtml(cand.alibaba.shop_name) + '</div>';
    html += '<a class="candidate-link" href="' + escHtml(cand.alibaba.product_url) + '" target="_blank">1688で見る &rarr;</a>';
    html += '</div>';
  });

  html += '</div>';
  card.innerHTML = html;
  return card;
}

function escHtml(s) {
  if (!s) return '';
  return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function num(n) {
  if (n == null) return '-';
  return Number(n).toLocaleString();
}

init();
</script>
</body>
</html>